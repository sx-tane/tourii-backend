{
    "name": "tourii-backend",
    "version": "0.0.1",
    "description": "",
    "author": "",
    "private": true,
    "license": "UNLICENSED",
    "config": {
        "#note": "appコンテナから参照するDATABASE_URLとlocalでprisma hogehogeするときに参照するDATABASE_URLが異なるため",
        "databaseurl": "postgresql://touriibackenddev:touriibackenddev@localhost:7442/tourii_backend"
    },
    "scripts": {
        "build": "nest build",
        "build:tourii-backend": "prisma generate && nest build tourii-backend",
        "build:production:tourii-backend": "prisma generate && pnpm run build:tourii-backend",
        "build:tourii-onchain": "nest build tourii-onchain",
        "build:production:tourii-onchain": "prisma generate && pnpm run build:tourii-onchain",
        "format": "pnpm format:prettier && pnpm format:biome",
        "format:prettier": "prettier --write '**/*.{yaml,yml,md}'",
        "format:biome": "biome format . --write",
        "lint": "biome lint .",
        "check": "biome check --write .",
        "start": "nest start",
        "start:dev": "nest start --watch",
        "start:dev:tourii-backend": "nest start --watch tourii-backend",
        "start:dev:tourii-onchain": "nest start --watch tourii-onchain",
        "start:debug": "nest start --debug --watch",
        "start:prod": "node dist/apps/tourii-backend/main",
        "start:prod:tourii-onchain": "node dist/apps/tourii-onchain/main",
        "test": "pnpm run prisma:migrate:test && dotenv -e .env.test -- pnpm run prisma:db:execute && jest",
        "prisma:studio": "cross-env MIGRATION_URL=$npm_package_config_databaseurl prisma studio",
        "prisma:introspect": "cross-env MIGRATION_URL=$npm_package_config_databaseurl prisma introspect",
        "prisma:migrate:test": "dotenv -e .env.test -- npx prisma migrate reset --force",
        "prisma:migrate:dev": "pnpm prisma db execute --schema=./prisma/schema.prisma --file=./prisma/scripts/drop_view.sql && cross-env MIGRATION_URL=$npm_package_config_databaseurl npx prisma migrate dev --schema=./prisma/schema.prisma && pnpm prisma:db:execute",
        "prisma:db:execute": "npx prisma db execute --schema=./prisma/schema.prisma --file=./prisma/scripts/moment_view.sql",
        "test:watch": "jest --watch",
        "test:cov": "jest --coverage",
        "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
        "test:e2e:app": "jest --config ./apps/tourii-backend/test/jest-e2e.json apps/tourii-backend/test/app.e2e-spec.ts",
        "update:openapi": "pnpm docs:api && pnpm dtsgen:tourii-backend",
        "docs:api": "redocly build-docs etc/openapi/openapi.json -o etc/openapi/openapi.html",
        "docs:api:onchain": "redocly build-docs etc/openapi/onchain/openapi.json -o etc/openapi/onchain/openapi.html",
        "dtsgen:tourii-backend": "npx dtsgen -o etc/openapi/openapi.d.ts etc/openapi/openapi.json && prettier --write etc/openapi/openapi.d.ts",
        "prepare": "husky",
        "cspell": "cspell --words-only --unique --config ./cspell.config.json | tee -a project-words.txt > /dev/null && env LC_ALL=C sort -u -o project-words.txt project-words.txt"
    },
    "prisma": {
        "seed": "ts-node prisma/seed.ts"
    },
    "lint-staged": {
        "**/*": [
            "cspell --config cspell.config.json --no-must-find-files"
        ],
        "*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}": [
            "biome check --apply --no-errors-on-unmatched"
        ],
        "*.{yaml,yml,md,d.ts}": [
            "prettier --write"
        ],
        "project-words.txt": [
            "sed -i '/^$/d' project-words.txt",
            "env LC_ALL=C sort -u -o project-words.txt"
        ]
    },
    "dependencies": {
        "@aws-sdk/client-s3": "^3.817.0",
        "@aws-sdk/client-sqs": "^3.787.0",
        "@gear-js/api": "0.38.3",
        "@nestjs/axios": "^4.0.0",
        "@nestjs/cache-manager": "^3.0.1",
        "@nestjs/common": "^10.4.15",
        "@nestjs/config": "^4.0.2",
        "@nestjs/core": "^10.4.15",
        "@nestjs/platform-express": "^10.4.15",
        "@nestjs/platform-socket.io": "^10.4.15",
        "@nestjs/swagger": "^8.1.0",
        "@nestjs/throttler": "^6.4.0",
        "@nestjs/websockets": "^10.4.15",
        "@polkadot/api": "13.2.1",
        "@polkadot/util": "13.3.1",
        "@prisma/client": "^6.5.0",
        "@prisma/extension-read-replicas": "^0.4.1",
        "archiver": "^7.0.1",
        "axios": "^1.10.0",
        "axios-retry": "^4.5.0",
        "bcrypt": "^6.0.0",
        "body-parser": "^2.2.0",
        "cache-manager-redis-store": "^3.0.1",
        "class-transformer": "^0.5.1",
        "class-validator": "^0.14.1",
        "compression": "^1.7.5",
        "cookie-parser": "^1.4.7",
        "cors": "^2.8.5",
        "crypto-js": "^4.2.0",
        "dayjs": "^1.11.13",
        "ethers": "^6.14.3",
        "exifreader": "^4.31.0",
        "express": "5.1.0",
        "google-auth-library": "^10.1.0",
        "googleapis": "^150.0.1",
        "helmet": "^8.1.0",
        "image-size": "^2.0.2",
        "jsonwebtoken": "^9.0.2",
        "jszip": "^3.10.1",
        "nest-commander": "^3.17.0",
        "nestjs-zod": "^4.3.1",
        "passkit-generator": "^3.1.9",
        "pnpm": "10.8.0",
        "prisma": "^6.6.0",
        "puppeteer": "^23.8.0",
        "qrcode": "^1.5.4",
        "reflect-metadata": "^0.2.2",
        "rxjs": "^7.2.0",
        "sails-js": "0.3.1",
        "sails-js-parser": "0.3.1",
        "sailscalls": "Vara-Lab/SailsCalls#types-test",
        "semver": "^7.5.4",
        "sha1": "^1.1.1",
        "socket.io": "^4.8.1",
        "ts-node": "^10.9.2",
        "uuid": "^11.1.0",
        "winston": "^3.17.0",
        "zod": "^3.25.56"
    },
    "devDependencies": {
        "@biomejs/biome": "^2.0.0",
        "@mermaid-js/mermaid-cli": "^11.4.2",
        "@nestjs/cli": "^11.0.5",
        "@nestjs/schematics": "^11.0.5",
        "@nestjs/testing": "^10.4.15",
        "@polkadot/keyring": "13.3.1",
        "@polkadot/types": "13.2.1",
        "@redocly/cli": "^1.25.0",
        "@swc/jest": "^0.2.37",
        "@types/archiver": "^6.0.3",
        "@types/bcrypt": "^5.0.2",
        "@types/body-parser": "^1.19.5",
        "@types/compression": "^1.7.5",
        "@types/cookie-parser": "^1.4.8",
        "@types/cors": "^2.8.17",
        "@types/crypto-js": "^4.2.2",
        "@types/express": "^5.0.2",
        "@types/jest": "29.5.14",
        "@types/jsonwebtoken": "^9.0.9",
        "@types/node": "^22.15.24",
        "@types/qrcode": "^1.5.5",
        "@types/semver": "^7.5.8",
        "@types/supertest": "^6.0.3",
        "@types/uuid": "^10.0.0",
        "cross-env": "^7.0.3",
        "cspell": "^9.0.2",
        "dayjs": "^1.11.13",
        "dotenv": "16.5.0",
        "dotenv-cli": "^8.0.0",
        "dtsgenerator": "^3.19.2",
        "husky": "^9.1.7",
        "jest": "29.7.0",
        "lint-staged": "^15.5.0",
        "mockdate": "^3.0.5",
        "prettier": "3.5.3",
        "prisma-erd-generator": "^2.0.4",
        "prisma-markdown": "^2.0.0",
        "redoc": "^2.1.5",
        "source-map-support": "^0.5.20",
        "supertest": "^7.1.0",
        "ts-loader": "^9.5.1",
        "tsconfig-paths": "4.2.0",
        "typescript": "^5.1.3"
    },
    "jest": {
        "moduleFileExtensions": [
            "js",
            "json",
            "ts"
        ],
        "rootDir": ".",
        "testRegex": ".*\\.spec\\.ts$",
        "transform": {
            "^.+\\.(t|j)s$": [
                "@swc/jest",
                {
                    "jsc": {
                        "parser": {
                            "syntax": "typescript",
                            "tsx": false,
                            "decorators": true
                        },
                        "transform": {
                            "legacyDecorator": true,
                            "decoratorMetadata": true
                        }
                    },
                    "module": {
                        "type": "commonjs"
                    },
                    "sourceMaps": true
                }
            ]
        },
        "collectCoverageFrom": [
            "**/*.(t|j)s"
        ],
        "maxWorkers": 1,
        "roots": [
            "<rootDir>/libs/",
            "<rootDir>/apps/"
        ],
        "moduleNameMapper": {
            "^@app/core(|/.*)$": "<rootDir>/libs/core/src/$1",
            "^@app/core-test(|/.*)$": "<rootDir>/libs/core/test/$1",
            "^@app/tourii-backend(|/.*)$": "<rootDir>/apps/tourii-backend/src/$1",
            "^@app/tourii-backend-test(|/.*)$": "<rootDir>/apps/tourii-backend/test/$1",
            "^@app/tourii-onchain(|/.*)$": "<rootDir>/apps/tourii-onchain/src/$1",
            "^@app/tourii-onchain-test(|/.*)$": "<rootDir>/apps/tourii-onchain/test/$1"
        },
        "setupFiles": [
            "<rootDir>/apps/tourii-backend/test/dotenv/config.ts"
        ]
    },
    "packageManager": "pnpm@10.11.0+sha512.6540583f41cc5f628eb3d9773ecee802f4f9ef9923cc45b69890fb47991d4b092964694ec3a4f738a420c918a333062c8b925d312f42e4f0c263eb603551f977"
}
